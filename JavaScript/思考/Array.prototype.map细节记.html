<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Array.prototype.map细节记 | 夜慕</title>
    <meta name="description" content="记录恰到好处的喜欢和投入">
    <link rel="icon" href="/web_favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.92a6720e.css" as="style"><link rel="preload" href="/assets/js/app.bd0db5bf.js" as="script"><link rel="preload" href="/assets/js/2.b15a339d.js" as="script"><link rel="preload" href="/assets/js/16.7fd72dd5.js" as="script"><link rel="prefetch" href="/assets/js/10.97b55b79.js"><link rel="prefetch" href="/assets/js/11.fd107a2d.js"><link rel="prefetch" href="/assets/js/12.0cd75d5f.js"><link rel="prefetch" href="/assets/js/13.1dcf0725.js"><link rel="prefetch" href="/assets/js/14.db85ae41.js"><link rel="prefetch" href="/assets/js/15.29a8266c.js"><link rel="prefetch" href="/assets/js/17.f04d1daf.js"><link rel="prefetch" href="/assets/js/18.6810e05c.js"><link rel="prefetch" href="/assets/js/19.9e3de4ab.js"><link rel="prefetch" href="/assets/js/20.4691289d.js"><link rel="prefetch" href="/assets/js/3.73987017.js"><link rel="prefetch" href="/assets/js/4.af7ddffa.js"><link rel="prefetch" href="/assets/js/5.ac2ae794.js"><link rel="prefetch" href="/assets/js/6.e67189fc.js"><link rel="prefetch" href="/assets/js/7.594f2442.js"><link rel="prefetch" href="/assets/js/8.9c17ee5f.js"><link rel="prefetch" href="/assets/js/9.4b543382.js">
    <link rel="stylesheet" href="/assets/css/0.styles.92a6720e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">夜慕</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/技巧/多判断条件.html" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">相关链接</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://witcheryoung.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/WitcherYoung" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/WitcherYoung/express-server" target="_blank" rel="noopener noreferrer" class="nav-link external">
  express 仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/技巧/多判断条件.html" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">相关链接</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://witcheryoung.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/WitcherYoung" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/WitcherYoung/express-server" target="_blank" rel="noopener noreferrer" class="nav-link external">
  express 仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>技巧</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>思考</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/思考/Array.prototype.map细节记.html" class="active sidebar-link">Array.prototype.map细节记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/思考/Array.prototype.map细节记.html#问题的描述是这样的" class="sidebar-link">问题的描述是这样的</a></li><li class="sidebar-sub-header"><a href="/JavaScript/思考/Array.prototype.map细节记.html#探究" class="sidebar-link">探究</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/思考/Array.prototype.map细节记.html#注意" class="sidebar-link">注意</a></li></ul></li><li class="sidebar-sub-header"><a href="/JavaScript/思考/Array.prototype.map细节记.html#原因" class="sidebar-link">原因</a></li><li class="sidebar-sub-header"><a href="/JavaScript/思考/Array.prototype.map细节记.html#解决方法" class="sidebar-link">解决方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/思考/Array.prototype.map细节记.html#_1-递归" class="sidebar-link">1. 递归</a></li><li class="sidebar-sub-header"><a href="/JavaScript/思考/Array.prototype.map细节记.html#_2-array-prototype-fill-方法" class="sidebar-link">2. Array.prototype.fill() 方法</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>方法</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="由一道面试题引发的思考"><a href="#由一道面试题引发的思考" aria-hidden="true" class="header-anchor">#</a> 由一道面试题引发的思考</h1> <p>———— 逛知乎的时候, 偶然间看到了一个问题, 说的是面试的事 <a href="https://www.zhihu.com/question/60165921" target="_blank" rel="noopener noreferrer">传送门<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="问题的描述是这样的"><a href="#问题的描述是这样的" aria-hidden="true" class="header-anchor">#</a> 问题的描述是这样的</h2> <blockquote><p>提问者提了一个问题，输入m.n参数，获取一个m长度的都是n的数组，不能用循环。</p></blockquote> <h5 id="那么看到这道题时，我觉得也不难，也尝试了一下，发现了自己在平时开发时没有注意的细节"><a href="#那么看到这道题时，我觉得也不难，也尝试了一下，发现了自己在平时开发时没有注意的细节" aria-hidden="true" class="header-anchor">#</a> 那么看到这道题时，我觉得也不难，也尝试了一下，发现了自己在平时开发时没有注意的细节</h5> <p>这是我刚开始的思路</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createArray</span><span class="token punctuation">(</span><span class="token parameter">m<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    arr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">execute </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        array<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> arr
<span class="token punctuation">}</span>

<span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token function">createArray</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出 [ &lt;2 empty items&gt; ]</span>
</code></pre></div><p>在调试的过程中, 我发现执行并没有进入到 map 方法中去, 回调函数中加上 console.log 输出仍然是 [ &lt;2 empty items&gt; ], 从而证实了我的想法</p> <h2 id="探究"><a href="#探究" aria-hidden="true" class="header-anchor">#</a> 探究</h2> <p>查阅资料 JavaScript权威指南<a href="https://github.com/xianshenglu/document/blob/master/JavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97-%E7%AC%AC6%E7%89%88-%E4%B8%AD-%E6%89%AB%E6%8F%8F%E7%89%88-%E6%B3%A8%E9%87%8A.pdf" target="_blank" rel="noopener noreferrer">(在线阅读-&gt;移步github)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>在数组章节 7.9.2 map() 中提到 传递给 map() 的函数的调用方式和 forEach() 是一样的, map() 和 forEach() 的区别是返回值。</p> <div class="tip custom-block"><h3 id="注意"><a href="#注意" aria-hidden="true" class="header-anchor">#</a> 注意</h3> <p>map() 返回的是新数组: 它不修改 调用数组( 原数组 )</p> <p>如果是稀疏数组, 返回的也是相同方式的稀疏数组: 它具有相同的长度, 相同的缺失元素
( 我们用一下例子来证实 )</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr2<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">item</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出 [ 'item1', &lt;2 empty items&gt; ]</span>
</code></pre></div></div> <h4 id="稀疏数组-是什么"><a href="#稀疏数组-是什么" aria-hidden="true" class="header-anchor">#</a> 稀疏数组 是什么?</h4> <p>包含从0开始的不连续索引的数组</p> <p>通常, 数组的length属性值代表数组中元素的个数. 如果数组是稀疏的, length值大于元素的个数</p> <p>( 也就是说, 数组长度大于数组中数据存在的元素 )</p> <h2 id="原因"><a href="#原因" aria-hidden="true" class="header-anchor">#</a> 原因</h2> <p>重温了 稀疏数组, map() 相关知识, 不难发现, createArray 函数中 arr 其实就是一个没有元素只定义了长度的稀疏数组, 所以我在使用 map() 函数的时候 会直接返回原数组</p> <h2 id="解决方法"><a href="#解决方法" aria-hidden="true" class="header-anchor">#</a> 解决方法</h2> <h3 id="_1-递归"><a href="#_1-递归" aria-hidden="true" class="header-anchor">#</a> 1. 递归</h3> <p>既然 map() 方法不能做到, 那么我就想到了递归来实现</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createArray</span><span class="token punctuation">(</span><span class="token parameter">m<span class="token punctuation">,</span> n<span class="token punctuation">,</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>length<span class="token operator">&gt;=</span>m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> res
    <span class="token punctuation">}</span>
    res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">createArray</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> n<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token function">createArray</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出 [ 1, 1, 1, 1, 1 ]</span>
</code></pre></div><h3 id="_2-array-prototype-fill-方法"><a href="#_2-array-prototype-fill-方法" aria-hidden="true" class="header-anchor">#</a> 2. Array.prototype.fill() 方法</h3> <p>fill() 方法用一个固定值填充一个数组中从起始索引到终止索引内的全部元素。不包括终止索引。
此方法很方便的就能解决刚开始的提问</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出 [ 1, 1, 1 ]</span>
</code></pre></div><blockquote><p>👉 等待收藏更多的解决方法 未完待续...</p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/30/2019, 11:56:16 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/JavaScript/基础/面向对象/原型.html" class="prev">示例代码</a></span> <span class="next"><a href="/JavaScript/方法/数组方法.html">js 数组方法</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.bd0db5bf.js" defer></script><script src="/assets/js/2.b15a339d.js" defer></script><script src="/assets/js/16.7fd72dd5.js" defer></script>
  </body>
</html>
